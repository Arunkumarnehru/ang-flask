(self.webpackChunkangularposts=self.webpackChunkangularposts||[]).push([[613],{613:(t,e,o)=>{"use strict";o.r(e),o.d(e,{PostModule:()=>b});var n=o(116),i=o(319),s=o(462),r=o(619),c=o(243);function l(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",7),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).enableEdit()}),r._uU(1,"Cancel Edit"),r.qZA()}}function d(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).enableEdit()}),r._uU(1,"Edit Post"),r.qZA()}}function a(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"form",11),r.NdJ("ngSubmit",function(){r.CHM(t);const e=r.oxw(3);return e.editPost(e.editForm.value)}),r.TgZ(1,"h2"),r._uU(2,"Edit post."),r.qZA(),r.TgZ(3,"p"),r._uU(4,"Edit the form to update the post in the database."),r.qZA(),r.TgZ(5,"div"),r.TgZ(6,"label",12),r._uU(7,"Title"),r.qZA(),r._UZ(8,"input",13),r.TgZ(9,"label",14),r._uU(10,"Content"),r.qZA(),r._UZ(11,"textarea",15),r.qZA(),r._UZ(12,"input",16),r._UZ(13,"input",17),r._UZ(14,"input",18),r.TgZ(15,"div",19),r.TgZ(16,"label",20),r._uU(17,"Change Cover"),r.qZA(),r.TgZ(18,"input",21),r.NdJ("change",function(e){return r.CHM(t),r.oxw(3).handleInput(e)}),r.qZA(),r.qZA(),r._UZ(19,"input",22),r.qZA()}if(2&t){const t=r.oxw(3);r.Q6J("formGroup",t.editForm),r.xp6(12),r.s9C("value",t.post[0]),r.xp6(1),r.s9C("value",t.post[3]),r.xp6(1),r.s9C("value",t.post[4]),r.xp6(5),r.Q6J("disabled",!t.editForm.valid)}}function u(t,e){1&t&&(r.TgZ(0,"div",23),r.TgZ(1,"p"),r._uU(2,"Processing request, please stand by, you will be redirected soon..."),r.qZA(),r.TgZ(3,"div",24),r._uU(4,"Loading..."),r.qZA(),r.qZA())}function p(t,e){if(1&t&&(r.TgZ(0,"div"),r.TgZ(1,"p"),r._uU(2,"Edit the current post bellow."),r.qZA(),r.YNc(3,a,20,5,"form",9),r.YNc(4,u,5,0,"div",10),r.qZA()),2&t){const t=r.oxw(2);r.xp6(3),r.Q6J("ngIf",!t.busy),r.xp6(1),r.Q6J("ngIf",t.busy)}}function g(t,e){if(1&t&&(r.TgZ(0,"div",2),r.TgZ(1,"h2"),r._uU(2),r.qZA(),r._UZ(3,"img",3),r.TgZ(4,"div"),r._uU(5),r.qZA(),r._UZ(6,"br"),r._UZ(7,"br"),r.YNc(8,l,2,0,"button",4),r.YNc(9,d,2,0,"ng-template",null,5,r.W1O),r.YNc(11,p,5,2,"div",6),r.qZA()),2&t){const t=r.MAs(10),e=r.oxw();r.xp6(2),r.hij("Title: ",e.post[1],""),r.xp6(1),r.s9C("src",e.post[3],r.LSH),r.xp6(2),r.hij("Content: ",e.post[2],""),r.xp6(3),r.Q6J("ngIf",e.editMode)("ngIfElse",t),r.xp6(3),r.Q6J("ngIf",e.editMode)}}const f=[{path:"",component:(()=>{class t{constructor(t,e,o){this.flaskApiService=t,this.route=e,this.router=o,this.currentId=this.route.snapshot.paramMap.get("id"),this.editMode=!1,this.editForm=new s.cw({title:new s.NI("",s.kI.required),content:new s.NI("",s.kI.required),oldcover:new s.NI("",s.kI.required),id:new s.NI("",s.kI.required),covername:new s.NI("",s.kI.required)})}handleInput(t){this.image=t.target.files,console.log(this.image)}enableEdit(){this.editMode=!this.editMode}editPost(t){this.busy=!0,this.editSubscription=this.flaskApiService.editPost(t,this.image).subscribe(t=>{this.busy=!1,console.log(t)})}getPostById(){this.postSubscription=this.flaskApiService.getPost(this.currentId).subscribe(t=>{this.post=t.data,console.log("post"),console.log(this.post),this.editForm.setValue({title:t.data[1],content:t.data[2],id:t.data[0],oldcover:t.data[3],covername:t.data[4]})})}deletePost(t){this.flaskApiService.deletePost(t).subscribe(t=>{console.log(t),this.router.navigate(["/"])})}ngOnInit(){this.getPostById()}ngOnDestroy(){this.postSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(c.P),r.Y36(i.gz),r.Y36(i.F0))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-post"]],decls:4,vars:1,consts:[["class","single",4,"ngIf"],[1,"delete","btn","btn-danger",3,"click"],[1,"single"],[1,"postsrc",3,"src"],["class","cancel btn btn-secondary",3,"click",4,"ngIf","ngIfElse"],["cancel",""],[4,"ngIf"],[1,"cancel","btn","btn-secondary",3,"click"],[1,"edit","btn","btn-primary",3,"click"],["class","editform",3,"formGroup","ngSubmit",4,"ngIf"],["class","processing",4,"ngIf"],[1,"editform",3,"formGroup","ngSubmit"],["for","title",1,"form-label"],["type","text","formControlName","title",1,"form-control"],["for","content",1,"form-label"],["formControlName","content",1,"form-control"],["type","hidden","formControlName","id",3,"value"],["type","hidden","formControlName","oldcover",3,"value"],["type","hidden","formControlName","covername",3,"value"],[1,"formcontrol"],["for","cover",1,"form-label"],["type","file","name","cover","id","cover",3,"change"],["type","submit","value","Submit",1,"btn","btn-success",3,"disabled"],[1,"processing"],[1,"loader"]],template:function(t,e){1&t&&(r.TgZ(0,"section"),r.YNc(1,g,12,6,"div",0),r.TgZ(2,"button",1),r.NdJ("click",function(){return e.deletePost(e.post[0])}),r._uU(3,"Delete Post"),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngIf",e.post))},directives:[n.O5,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u],styles:[".single[_ngcontent-%COMP%]{text-align:center;margin:auto}.postsrc[_ngcontent-%COMP%]{width:600px;height:auto;padding:.5rem;box-shadow:0 3px 8px #0000003d}.editform[_ngcontent-%COMP%]{width:450px;height:auto;margin:auto;border:1px solid #000;border-radius:30px;padding:1rem;text-align:left}.form-label[_ngcontent-%COMP%]{font-weight:700;color:#00008b}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[i.Bz.forChild(f)],i.Bz]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[],imports:[[m,n.ez,s.UX]]}),t})()}}]);